
# 一、用户模块



## 1.1、用户注册

接口地址：`http://127.0.0.1:8080/user/userRegister`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/user/userRegister`

请求参数说明：

| 名称   | 必填 | 类型   | 说明     |
| ------ | ---- | ------ | -------- |
| uName  | 是   | String | 用户名   |
| uPwd   | 是   | String | 密码     |
| uPhone | 是   | String | 手机号码 |

返回参数说明：

| 名称 | 类型   | 说明                                                         |
| ---- | ------ | ------------------------------------------------------------ |
| code | INT    | 返回码  200-注册成功  401-用户账号为空  402-用户名为空  403-密码为空  404-手机号码为空 |
| Msg  | String | 返回相关信息                                                 |



## 1.2、用户登录

接口地址：`http://127.0.0.1:8080/user/userLogin`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/user/userLogin`

请求参数说明：

| 名称 | 必填 | 类型   | 说明     |
| ---- | ---- | ------ | -------- |
| uName  | 是   | INT    | 用户账号 |
| uPwd | 是   | String | 密码     |

返回参数说明：

| 名称 | 类型   | 说明                                                         |
| ---- | ------ | ------------------------------------------------------------ |
| code | INT    | 返回码  300-登录成功  301-账号或密码错误  401-用户名为空  402-密码为空  403-电话为空 |
| msg  | string | 返回相关信息                                                 |

session参数说明：

| 名称        | 类型 | 说明                                                         |
| ----------- | ---- | ------------------------------------------------------------ |
| session.uId | INT  | 登录后将uId赋值给session，即可通过session判断为登录状态或退出状态 |



## 1.3、退出登录

接口地址：`http://127.0.0.1:8080/user/userLogout`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/user/userLogout`

session参数说明：

| 名称        | 类型 | 说明                        |
| ----------- | ---- | --------------------------- |
| session.uId | INT  | 将session.uId赋值为“”（空） |

返回参数说明：

| 名称 | 类型   | 说明                               |
| ---- | ------ | ---------------------------------- |
| code | INT    | 返回码  900-退出成功  901-退出失败 |
| msg  | string | 返回相关信息                       |



## 1.4、判断是否登录

接口地址：`http://127.0.0.1:8080/user/isLogin`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/user/isLogin`

session参数说明：

| 名称        | 类型 | 说明                    |
| ----------- | ---- | ----------------------- |
| session.uId | INT  | 判断session.uId是否为空 |

返回参数说明：

| 名称 | 类型   | 说明                       |
| ---- | ------ | -------------------------- |
| code | INT    | 返回码  1-已登录  0-未登录 |
| msg  | string | 返回相关信息               |



# 二、订单模块



## 2.1、查询订单

接口地址：`http://127.0.0.1:8080/order/findAll`

返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/order/findAll`

返回参数说明：

| 名称 | 类型  | 说明                 |
| ---- | ----- | -------------------- |
| list | Array | 所有订单的所有参数   |
| code | INT   | 返回码  400-返回成功 |

返回参数示例：

```js
[
  RowDataPacket {
    oId: 2,
    uId: 123,
    oTotalPrice: 999,
    oAddress: '华南师范大学',
    oState: '派送中'
  },
  RowDataPacket {
    oId: 3,
    uId: 123,
    oTotalPrice: 666,
    oAddress: '华南师范大学',
    oState: '已完成'
  },
  RowDataPacket {
    oId: 4,
    uId: 123,
    oTotalPrice: 10,
    oAddress: '华南师范大学',
    oState: '已完成'
  },
  RowDataPacket {
    oId: 6,
    uId: 123,
    oTotalPrice: 100,
    oAddress: '100',
    oState: '进行中'
  },
  RowDataPacket {
    oId: 7,
    uId: 123,
    oTotalPrice: 100,
    oAddress: '华师',
    oState: '进行中'
  },
  RowDataPacket {
    oId: 8,
    uId: 123,
    oTotalPrice: 100,
    oAddress: '华师',
    oState: '进行中'
  },
  RowDataPacket {
    oId: 9,
    uId: 123,
    oTotalPrice: 100,
    oAddress: '华师',
    oState: '进行中'
  }
]
```



## 2.2、删除订单

接口地址：`http://127.0.0.1:8080/order/deleteOrder`

返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/order/deleteOrder?uid=123&oid=1`

请求参数说明： 

| 名称 | 必填 | 类型 | 说明                         |
| ---- | ---- | ---- | ---------------------------- |
| oId  | 是   | INT  | 根据用户id和订单id删除该订单 |

返回参数说明：

| 名称 | 类型   | 说明                                 |
| ---- | ------ | ------------------------------------ |
| code | INT    | 返回码  500-删除成功  405-订单不存在 |
| msg  | String | 返回相关信息                         |

返回参数示例：

`{"code":500,"msg":"删除成功"}`



## 2.3、确认收货


接口地址：`http://127.0.0.1:8080/order/receiveOrder`


返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/order/receiveOrder?oId=1`

请求参数说明： 

| 名称 | 必填 | 类型 | 说明                                       |
| ---- | ---- | ---- | ------------------------------------------ |
| oId  | 是   | INT  | 根据用户id和订单id修改订单状态为“确认收货” |

返回参数说明：

| 名称 | 类型   | 说明                                     |
| ---- | ------ | ---------------------------------------- |
| code | INT    | 返回码  600-确认收货成功  405-订单不存在 |
| msg  | string | 返回相关信息                             |

返回参数：

`{"code":600,"msg":"确认收货成功"}`



## 2.4、创建订单


接口地址：`http://127.0.0.1:8080/order/createOrder`


返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/order/createOrder`

请求参数说明： 

| 名称        | 必填 | 类型   | 说明                   |
| ----------- | ---- | ------ | ---------------------- |
| oTotalPrice | 是   | Float  | 图书的价格总和         |
| oAddress    | 是   | String | 收货地址               |
| bIdList     | 是   | String | 一组图书编号组成字符串 |
| bNumList    | 是   | String | 一组图书数量组成字符串 |

返回参数说明：

| 名称 | 类型   | 说明                                                         |
| ---- | ------ | ------------------------------------------------------------ |
| code | INT    | 返回码  700-创建订单成功。此时创建了新订单，并将购物车内勾选的物品删除 |
| msg  | string | 返回相关信息                                                 |

返回参数：

```js
{
  oTotalPrice: '100',
  oAddress: '华师',
  bIdList: '1,2,3,4,5',
  bNumList: '1,2,3,4,5'
}
```



## 2.5、查询某个订单

接口地址：`http://127.0.0.1:8080/order/findOne`

返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/order/findOne`

请求参数说明：

| 名称 | 必填 | 类型 | 说明                                   |
| ---- | ---- | ---- | -------------------------------------- |
| oId  | 是   | Int  | 根据uId和oId在订单中搜索，返回该订单。 |

返回参数说明：

| 名称 | 类型  | 说明                 |
| ---- | ----- | -------------------- |
| list | Array | 所有该订单的所有参数 |
| code | INT   | 返回码  400-返回成功 |



# 三、购物车模块



## 3.1、增加图书

接口地址：`http://127.0.0.1:8080/cart/addBook`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/addBook`

请求参数说明：

| 名称 | 类型 | 说明       |
| ---- | ---- | ---------- |
| bId  | INT  | 图书的编号 |

返回参数说明：

| 名称 | 类型   | 说明                                                         |
| ---- | ------ | ------------------------------------------------------------ |
| code | INT    | 返回码  201:  uId 为空  202:  bId 为空  100:  成功，加入一本书到用户的购物车  101:  成功，图书已经在用户的购物车内，图书的数量加1 |
| msg  | String | 对应的返回码的提示信息。                                     |



## 3.2、删除图书

接口地址：`http://127.0.0.1:8080/cart/deleteBook`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/deleteBook`

请求参数说明：

| 名称 | 类型 | 说明       |
| ---- | ---- | ---------- |
| bId  | INT  | 图书的编号 |

返回参数说明：

| 名称 | 类型   | 说明                                                 |
| ---- | ------ | ---------------------------------------------------- |
| code | INT    | 返回码  201:  uId 为空  202:  bId 为空  101:成功删除 |
| msg  | String | 对应的返回码的提示信息。                             |



## 3.3、增加一本

接口地址：`http://127.0.0.1:8080/cart/addOneBook`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/addOneBook`

请求参数说明：

| 名称 | 类型 | 说明       |
| ---- | ---- | ---------- |
| bId  | INT  | 图书的编号 |

返回参数说明：

| 名称 | 类型   | 说明                                                     |
| ---- | ------ | -------------------------------------------------------- |
| code | INT    | 返回码  201:  uId 为空  202:  bId 为空  101:成功增加一本 |
| msg  | String | 对应的返回码的提示信息。                                 |



## 3.4、删除一本

接口地址：`http://127.0.0.1:8080/cart/minusOneBook`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/minusOneBook`

请求参数说明：

| 名称 | 类型 | 说明       |
| ---- | ---- | ---------- |
| bId  | INT  | 图书的编号 |

返回参数说明：

| 名称 | 类型   | 说明                                                         |
| ---- | ------ | ------------------------------------------------------------ |
| code | INT    | 返回码  201:  uId 为空  202:  bId 为空  101:  成功删除一本，若图书数量为0，则从购物车中移除。 |
| msg  | String | 对应的返回码的提示信息。                                     |



## 3.5、修改图书数量

接口地址：`http://127.0.0.1:8080/cart/modifyBookNum`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/modifyBookNum`

请求参数说明：

| 名称 | 类型 | 说明                     |
| ---- | ---- | ------------------------ |
| bId  | INT  | 图书的编号               |
| bNum | INT  | 图书的数量（修改之后的） |

返回参数说明：

| 名称 | 类型   | 说明                                                   |
| ---- | ------ | ------------------------------------------------------ |
| code | INT    | 返回码  201:  uId 为空  202:  bId 为空  101:  修改成功 |
| msg  | String | 对应的返回码的提示信息。                               |



## 3.6、计算被选中的图书的价格

接口地址：`http://127.0.0.1:8080/cart/calcTotalPrice`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/calcTotalPrice`

请求参数说明：

| 名称     | 类型   | 说明                   |
| -------- | ------ | ---------------------- |
| bIdList  | String | 一组图书编号组成字符串 |
| bNumList | String | 一组图书数量组成字符串 |

返回参数说明：

| 名称       | 类型  | 说明           |
| ---------- | ----- | -------------- |
| totalPrice | Float | 图书的价格总和 |

示例：

假设前端传了3本书，编号分别为11，22，33。每本书的数量分别为1，2，3。那么请求参数应为：

```js
{
  "bIdList" : [11, 22, 33].join(),
  "bNumList" : [1, 2, 3].join()
}
```

假设每本书的价格为1，1，1。那么返回的将是一个JSON：

```js
{
  "totalPrice" : 6
}
```



## 3.7、返回用户的购物车

接口地址：`http://127.0.0.1:8080/cart/getUserCart`

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/getUserCart`

返回参数说明：

| 名称      | 类型   | 说明                                                         |
| --------- | ------ | ------------------------------------------------------------ |
| code      | INT    | 返回码。  201：uId为空  101：成功。此时没有msg。             |
| msg       | String | 返回的信息/描述                                              |
| booksList | JSON   | booksList是一个数组，数组中的每个元素都是JSON，包括了每本书的信息（具体信息看数据库吧 = =）。 |



## 3.8、修改图书状态

接口地址：`http://127.0.0.1:8080/cart/changeBookStatus `

返回格式：json

请求方式：post

请求示例：`http://127.0.0.1:8080/cart/changeBookStatus`

请求参数说明：

| 名称   | 类型 | 说明                                     |
| ------ | ---- | ---------------------------------------- |
| bId    | INT  | 图书的编号。                             |
| status | INT  | 图书被选中的状态，1：已选中；0：未选中。 |





# 四、图书模块



## 4.1、返回所有图书

接口地址：`http://127.0.0.1:8080/book/findAll`

返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/book/findAll`

请求参数说明：无

返回参数说明：

| 名称 | 类型  | 说明               |
| ---- | ----- | ------------------ |
| list | Array | 所有图书的所有参数 |
| p    | INT   | 页数。             |

示例：

太多了，仅截取一部分。

```js
{
  "list": [
    {
      "bId": 1,
      "bName": "旋涡",
      "bDescription": "◎伊藤润二代表作！首次简体中文版出版！◎双封+精美赠品（海报1张、书签2张、原画卡片3张），值得珍藏！◎建议18岁以上读者阅读------------...",
      "bAuthor": "[日] 伊藤润二 穆迪",
      "bTag": "动漫",
      "bPrice": 99,
      "bPublisher": "新星出版社",
      "bUri": "cartoon_1.jpg"
    },
    {
      "bId": 2,
      "bName": "缅甸小日子",
      "bDescription": "※安古兰漫画大奖得主的另类报告书※翻译成十多种语言的纸上纪录片※独一无二的缅甸纪实漫画※非浮光掠影式的深度旅行手账※一个神秘国度的荒诞与日常※漫画...",
      "bAuthor": "[加]盖·德利斯勒 王大莹",
      "bTag": "动漫",
      "bPrice": 62,
      "bPublisher": "后浪丨湖南美术出版社",
      "bUri": "cartoon_2.jpg"
    }
  ]
}

```



## 4.2、关键字搜索

接口地址：`http://127.0.0.1:8080/book/searchByKey`

返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/book/searchByKey?key=三体`

请求参数说明： 

| 名称 | 必填 | 类型   | 说明                                               |
| ---- | ---- | ------ | -------------------------------------------------- |
| key  | 是   | String | 根据关键字在书名、作者、描述、出版社和标签中搜索。 |
| p    | 是   | INT    | 页数                                               |

返回参数说明：

| 名称  | 类型  | 说明                       |
| ----- | ----- | -------------------------- |
| list  | Array | 所有符合的图书，可能为空。 |
| total | INT   | 图书总数。                 |



## 4.3、标签搜索

接口地址：`http://127.0.0.1:8080/book/searchByTags`

返回格式：json

请求方式：get

请求示例：`http://127.0.0.1:8080/book/searchByTags?tag=”动漫,小说”`

请求参数说明： 

| 名称    | 必填 | 类型   | 说明                     |
| ------- | ---- | ------ | ------------------------ |
| tagList | 是   | String | 根据关键字在标签中搜索。 |
| p       | 是   | INT    | 页数                     |

返回参数说明：

| 名称  | 类型  | 说明                       |
| ----- | ----- | -------------------------- |
| list  | Array | 标签相同的图书，可能为空。 |
| total | INT   | 图书总数。                 |

示例：

太长了，忽略了一部分查询结果。

```js
{
    "list": [
        {
            "bId": 1,
            "bName": "旋涡",
            "bDescription": "◎伊藤润二代表作！首次简体中文版出版！◎双封+精美赠品（海报1张、书签2张、原画卡片3张），值得珍藏！◎建议18岁以上读者阅读------------...",
            "bAuthor": "[日] 伊藤润二 穆迪",
            "bTag": "动漫",
            "bPrice": 99,
            "bPublisher": "新星出版社",
            "bUri": "cartoon_1.jpg"
        },
        {
            "bId": 2,
            "bName": "缅甸小日子",
            "bDescription": "※安古兰漫画大奖得主的另类报告书※翻译成十多种语言的纸上纪录片※独一无二的缅甸纪实漫画※非浮光掠影式的深度旅行手账※一个神秘国度的荒诞与日常※漫画...",
            "bAuthor": "[加]盖·德利斯勒 王大莹",
            "bTag": "动漫",
            "bPrice": 62,
            "bPublisher": "后浪丨湖南美术出版社",
            "bUri": "cartoon_2.jpg"
        },
        {
            "bId": 3,
            "bName": "OPUS 作品",
            "bDescription": "动画大师今敏，漫画生涯至高代表作！追悼纪念，遗作重见天日，首度作为单行本出版的蕞后长篇杰作！完整收录生前被拒绝刊登的「神结局」深具自传色彩，你所能想象...",
            "bAuthor": "[日] 今敏 Mrs.X",
            "bTag": "动漫",
            "bPrice": 88,
            "bPublisher": "北京联合出版公司",
            "bUri": "cartoon_3.jpg"
        }
    ]
}
```



## 4.4、关键字&标签搜索

接口地址：`http://127.0.0.1:8080/book/searchByTagsAndKeys`

返回格式：json

请求方式：get

请求参数说明： 

| 名称    | 必填 | 类型   | 说明                                               |
| ------- | ---- | ------ | -------------------------------------------------- |
| key     | 是   | String | 根据关键字在书名、作者、描述、出版社和标签中搜索。 |
| tagList | 是   | String | 根据关键字在标签中搜索。                           |
| p       | 是   | INT    | 页数                                               |

返回参数说明：

| 名称  | 类型  | 说明                       |
| ----- | ----- | -------------------------- |
| list  | Array | 标签相同的图书，可能为空。 |
| total | INT   | 图书总数。                 |



## 4.5、显示图书详情

接口地址：`http://127.0.0.1:8080/book/showdetail`

返回格式：json

请求方式：get

请求参数说明： 

| 名称 | 必填 | 类型 | 说明                           |
| ---- | ---- | ---- | ------------------------------ |
| bId  | 是   | INT  | 根据图书ID搜索图书的详细信息。 |

返回参数说明：

| 名称   | 类型  | 说明           |
| ------ | ----- | -------------- |
| result | Array | 图书的详细信息 |

示例：

```js
 {"result":[{"bId":6,"bName":"雕塑家","bDescription":"✧影响千万创作者的《理解漫画》作者斯科特·麦克劳德首部图像小说✧当代幻想文学巨匠尼尔·盖曼力荐作品✧《纽约时报》《洛杉矶时报》《卫报》一致推崇※※※...","bAuthor":"[美] 斯科特·麦克劳德 编绘 孙侃","bTag":"动漫","bPrice":138,"bPublisher":"湖南美术出版社","bUri":"cartoon_6.jpg"}]}
```
